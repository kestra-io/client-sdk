# Python SDK

## Steps to generate the SDK

1. Update the `kestra-ee.yml` file if necessary with latest OpenSpec API changes.

   - As of 2025-06-13, the `kestra-ee.yml` file has been generated and used without modifications.
   - Micronaut OpenAPI version `6.16.2` was used. As of 2025-06-13, these changes have not been committed to the core yet (they exist only locally).
2. Generate the SDK using the script `generate-sdks.sh` that uses the openapi-generator-cli docker image.

3. Several manual changes must be made to the generated SDK files:
   - In the pyproject.toml file, set the following values (replace the existing values):
     ```toml
     license = "Apache-2.0"
     requires-python = ">=3.9"
     ```
   - In the `executions_api.py`, delete the following import, this is an incorrect import generated by Micronaut OpenAPI:
     ```python
     from kestra_api_client.models.list[label] import List[Label]
     ```

## How to use the SDK

The OpenAPI generator will generate one API per controller, so we've created a custom Kestra Client that needs to be instantiated once for every API.
Use the manually written `from kestra_api_client import KestraClient` to gather everything in one client.

Then, create a `Configuration`, set its values, and instantiate the client:

```python
configuration = Configuration()
configuration.host = "http://localhost:8080"
configuration.username = "root@root.com"
configuration.password = "Root!1234"

kestra_client = KestraClient(configuration)
```

Then, simply use the client to call the API:

```python
res = kestra_client.flows.search_flows(1, 10, tenant_id)

print("Found flows:", len(res.results))
```